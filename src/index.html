<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0">

    <title>Eluvio Media Store</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script type="text/javascript" src="./configuration.js"></script>
  </head>
  <body>
    <div id="app" class="app"></div>

    <style id="_fonts"></style>
    <style id="_theme"></style>
    <style id="_custom-css"></style>

    <script type="text/javascript">
      try {
        const backgroundImage = (window.innerWidth < 800 && sessionStorage.getItem("background-image-mobile")) || sessionStorage.getItem("background-image");

        if(backgroundImage) {
          document.querySelector("#app-background").style.background = "no-repeat top center / cover url(\"" + backgroundImage + "\")";
        } else {
          const searchParams = new URLSearchParams(decodeURIComponent(window.location.search));
          const darkMode = searchParams.has("dk") || sessionStorage.getItem("dark-mode")

          // If light mode specified, set light body color ASAP
          if(darkMode) {
            document.body.style.backgroundColor = "#000000";
          }
        }

        if(sessionStorage.getItem("custom-css")) {
          document.querySelector("#_custom-css").innerHTML = atob(sessionStorage.getItem("custom-css"));
        }
      } catch(error) {
        console.error(error);
      }
    </script>
  </body>
</html>
